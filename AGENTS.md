# AGENTS.md

<!-- Generated by Homer. Sections between homer:preserve markers are kept on update. -->

## Build & Test Commands

**github_actions:**
- `cargo fmt --all -- --check`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo build --workspace`
- `cargo test --workspace`
- `cargo build --workspace`
- `cargo test --workspace`
- `cargo install cross --git https://github.com/cross-rs/cross`
- `cargo build --release --target ${{ matrix.target }} -p homer-cli`
- `cross build --release --target ${{ matrix.target }} -p homer-cli`
- `|`

## Module Map

| Module | Files | Functions | Types |
|--------|------:|----------:|------:|
| `homer` | 15 | 0 | 0 |
| `homer-cli` | 3 | 0 | 0 |
| `homer-cli/src` | 6 | 1 | 2 |
| `homer-cli/src/commands` | 24 | 32 | 19 |
| `homer-core` | 6 | 0 | 0 |
| `homer-core/benches` | 9 | 14 | 0 |
| `homer-core/src` | 33 | 52 | 58 |
| `homer-core/src/analyze` | 24 | 107 | 39 |
| `homer-core/src/extract` | 27 | 140 | 37 |
| `homer-core/src/llm` | 9 | 34 | 23 |
| `homer-core/src/query` | 3 | 0 | 0 |
| `homer-core/src/render` | 18 | 84 | 23 |
| `homer-core/src/store` | 15 | 47 | 9 |
| `homer-graphs` | 3 | 0 | 0 |
| `homer-graphs/src` | 18 | 34 | 40 |
| `homer-graphs/src/languages` | 27 | 93 | 23 |
| `homer-mcp` | 3 | 0 | 0 |
| `homer-mcp/src` | 3 | 17 | 5 |
| `homer-test` | 6 | 0 | 0 |
| `homer-test/src` | 3 | 8 | 1 |
| `homer-test/tests` | 3 | 13 | 0 |

## Change Patterns

**Most frequently changed files:**

| File | Changes |
|------|--------:|
| `homer-core/src` | 12 |
| `homer-core` | 12 |
| `homer-core/src/extract` | 9 |
| `homer-core/src/analyze` | 8 |
| `homer-cli` | 8 |
| `homer-core/src/render` | 8 |
| `homer-cli/src` | 8 |
| `homer-cli/src/commands` | 8 |
| `homer-core/src/pipeline.rs` | 6 |
| `homer-core/src/analyze/mod.rs` | 6 |

**Files that change together:**

- `homer-core/Cargo.toml` + `homer-graphs/src` (confidence: 1%)
- `homer-core/Cargo.toml` + `homer-graphs/src/languages/javascript.rs` (confidence: 1%)
- `homer-core/Cargo.toml` + `homer-cli/src/commands/update.rs` (confidence: 1%)
- `homer-core/src/query` + `homer-graphs/src/languages` (confidence: 1%)
- `homer-core/src/query` + `homer-core/src/extract/.context.md` (confidence: 1%)

## Load-Bearing Code

Functions and types with the highest structural importance (composite salience).
Modifications require understanding all callers and running the full test suite.

| Entity | Salience | Classification |
|--------|----------|----------------|
| `homer-core/src/analyze/mod.rs` | 14.05 | PeripheralActive |
| `homer-core/src/pipeline.rs` | 14.05 | PeripheralActive |
| `homer-core/src/config.rs` | 13.45 | PeripheralActive |
| `homer-core/src/render/agents_md.rs` | 13.30 | PeripheralActive |
| `homer-cli/src/commands/mod.rs` | 12.40 | PeripheralActive |
| `homer-core/src/store/sqlite.rs` | 11.80 | PeripheralActive |
| `homer-core/src/extract/graph.rs` | 11.50 | PeripheralActive |
| `homer-cli/src/commands/status.rs` | 11.50 | PeripheralActive |
| `homer-graphs/src/languages/mod.rs` | 11.35 | PeripheralActive |
| `homer-core/src/extract/structure.rs` | 11.20 | PeripheralActive |
| `homer-test/src/lib.rs` | 11.05 | PeripheralActive |
| `homer-graphs/src/scope_graph.rs` | 10.90 | PeripheralActive |
| `homer-graphs/src/languages/javascript.rs` | 10.75 | PeripheralActive |
| `homer-cli/src/main.rs` | 10.45 | PeripheralActive |
| `homer-graphs/src/import_graph.rs` | 10.30 | PeripheralActive |
| `homer-test/tests/pipeline.rs` | 10.00 | PeripheralActive |
| `homer-core/src/render/traits.rs` | 9.85 | PeripheralActive |
| `homer-cli/src/commands/init.rs` | 9.85 | PeripheralActive |
| `homer-cli/src/commands/graph.rs` | 9.55 | PeripheralActive |
| `homer-graphs/src/call_graph.rs` | 9.10 | PeripheralActive |

## Danger Zones

Files with high change frequency and low bus factor require extra care.

| File | Changes | Bus Factor | Top Contributor |
|------|--------:|-----------:|----------------:|
| `homer-core/src` | 12 | 1 | 100% |
| `homer-core` | 12 | 1 | 100% |
| `homer-core/src/extract` | 9 | 1 | 100% |
| `homer-core/src/analyze` | 8 | 1 | 100% |
| `homer-cli` | 8 | 1 | 100% |
| `homer-core/src/render` | 8 | 1 | 100% |
| `homer-cli/src` | 8 | 1 | 100% |
| `homer-cli/src/commands` | 8 | 1 | 100% |
| `homer-core/src/pipeline.rs` | 6 | 1 | 100% |
| `homer-core/src/analyze/mod.rs` | 6 | 1 | 100% |

## Conventions

**Languages:**
- rust: 66 files

**Dependencies:** 36 external packages

**Naming:** snake_case (59% adherence)
- snake_case: 568 (59%)
- lowercase: 203 (21%)
- PascalCase: 184 (19%)

**Testing:** unknown
- Pattern: tests/ directory
- 3 test files / 64 source files

**Error handling:** mixed
- `.unwrap()`: 701 occurrences
- `? operator`: 638 occurrences
- `Result<T, E>`: 232 occurrences
- `.expect()`: 14 occurrences

**Documentation:** 10% coverage (93/955 entities)
- Dominant style: Rustdoc

**Agent rules:** CLAUDE.md

