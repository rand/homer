# AGENTS.md

<!-- Generated by Homer. Sections between homer:preserve markers are kept on update. -->

## Build & Test Commands

**github_actions:**
- `cargo fmt --all -- --check`
- `cargo clippy --workspace --all-targets -- -D warnings`
- `cargo build --workspace`
- `cargo test --workspace`
- `cargo build --workspace`
- `cargo test --workspace`
- `cargo install cross --git https://github.com/cross-rs/cross`
- `cargo build --release --target ${{ matrix.target }} -p homer-cli`
- `cross build --release --target ${{ matrix.target }} -p homer-cli`
- `|`

## Module Map

| Module | Files | Functions | Types |
|--------|------:|----------:|------:|
| `homer` | 10 | 0 | 0 |
| `homer-cli` | 2 | 0 | 0 |
| `homer-cli/src` | 4 | 1 | 2 |
| `homer-cli/src/commands` | 16 | 32 | 19 |
| `homer-core` | 4 | 0 | 0 |
| `homer-core/benches` | 6 | 14 | 0 |
| `homer-core/src` | 22 | 47 | 57 |
| `homer-core/src/analyze` | 16 | 107 | 39 |
| `homer-core/src/extract` | 18 | 140 | 37 |
| `homer-core/src/llm` | 6 | 34 | 23 |
| `homer-core/src/query` | 2 | 0 | 0 |
| `homer-core/src/render` | 12 | 84 | 23 |
| `homer-core/src/store` | 10 | 42 | 8 |
| `homer-graphs` | 2 | 0 | 0 |
| `homer-graphs/src` | 12 | 34 | 40 |
| `homer-graphs/src/languages` | 18 | 93 | 23 |
| `homer-mcp` | 2 | 0 | 0 |
| `homer-mcp/src` | 2 | 17 | 5 |
| `homer-test` | 4 | 0 | 0 |
| `homer-test/src` | 2 | 8 | 1 |
| `homer-test/tests` | 2 | 13 | 0 |

## Change Patterns

**Most frequently changed files:**

| File | Changes |
|------|--------:|
| `homer-core/src` | 10 |
| `homer-core` | 10 |
| `homer-core/src/analyze` | 7 |
| `homer-core/src/extract` | 7 |
| `homer-core/src/render` | 7 |
| `homer-core/src/pipeline.rs` | 6 |
| `homer-cli` | 6 |
| `homer-core/src/analyze/mod.rs` | 6 |
| `homer-cli/src` | 6 |
| `homer-cli/src/commands` | 6 |

**Files that change together:**

- `homer-core/Cargo.toml` + `homer-graphs/src/languages/rust.rs` (confidence: 1%)
- `homer-core/Cargo.toml` + `homer-core/src` (confidence: 1%)
- `homer-core/Cargo.toml` + `homer-graphs/src/languages/python.rs` (confidence: 1%)
- `homer-core/src/query` + `homer-mcp/src` (confidence: 1%)
- `homer-core/src/query` + `homer-core/src/render` (confidence: 1%)

## Load-Bearing Code

Functions and types with the highest structural importance (composite salience).
Modifications require understanding all callers and running the full test suite.

| Entity | Salience | Classification |
|--------|----------|----------------|
| `homer-core/src/pipeline.rs` | 14.35 | PeripheralActive |
| `homer-core/src/analyze/mod.rs` | 14.05 | PeripheralActive |
| `homer-core/src/render/agents_md.rs` | 13.75 | PeripheralActive |
| `homer-core/src/config.rs` | 13.60 | PeripheralActive |
| `homer-cli/src/commands/mod.rs` | 12.85 | PeripheralActive |
| `homer-graphs/src/languages/mod.rs` | 12.40 | PeripheralActive |
| `homer-core/src/extract/structure.rs` | 11.80 | PeripheralActive |
| `homer-core/src/extract/git.rs` | 11.50 | PeripheralActive |
| `homer-cli/src/commands/init.rs` | 11.50 | PeripheralActive |
| `homer-graphs/src/languages/java.rs` | 11.35 | PeripheralActive |
| `homer-test/tests/pipeline.rs` | 11.20 | PeripheralActive |
| `homer-mcp/src/lib.rs` | 11.05 | PeripheralActive |
| `homer-graphs/src/languages/go.rs` | 10.90 | PeripheralActive |
| `homer-core/src/store/sqlite.rs` | 10.75 | PeripheralActive |
| `homer-test/src/lib.rs` | 10.75 | PeripheralActive |
| `homer-cli/src/commands/update.rs` | 10.75 | PeripheralActive |
| `homer-core/src/error.rs` | 10.45 | PeripheralActive |
| `homer-core/src/extract/document.rs` | 10.30 | PeripheralActive |
| `homer-cli/src/commands/status.rs` | 10.15 | PeripheralActive |
| `homer-cli/src/main.rs` | 10.00 | PeripheralActive |

## Danger Zones

Files with high change frequency and low bus factor require extra care.

| File | Changes | Bus Factor | Top Contributor |
|------|--------:|-----------:|----------------:|
| `homer-core/src` | 10 | 1 | 100% |
| `homer-core` | 10 | 1 | 100% |
| `homer-core/src/analyze` | 7 | 1 | 100% |
| `homer-core/src/extract` | 7 | 1 | 100% |
| `homer-core/src/render` | 7 | 1 | 100% |
| `homer-core/src/pipeline.rs` | 6 | 1 | 100% |
| `homer-cli` | 6 | 1 | 100% |
| `homer-core/src/analyze/mod.rs` | 6 | 1 | 100% |
| `homer-cli/src` | 6 | 1 | 100% |
| `homer-cli/src/commands` | 6 | 1 | 100% |

## Conventions

**Languages:**
- rust: 66 files

**Dependencies:** 36 external packages

**Naming:** snake_case (59% adherence)
- snake_case: 558 (59%)
- lowercase: 201 (21%)
- PascalCase: 184 (20%)

**Testing:** unknown
- Pattern: tests/ directory
- 3 test files / 64 source files

**Error handling:** mixed
- `.unwrap()`: 665 occurrences
- `? operator`: 633 occurrences
- `Result<T, E>`: 232 occurrences
- `.expect()`: 12 occurrences

**Documentation:** 9% coverage (88/943 entities)
- Dominant style: Rustdoc

**Agent rules:** CLAUDE.md

